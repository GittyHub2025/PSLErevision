<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>PSLE åæ–‡é—ªå¡ (PSLE Chinese Flashcards)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
    <style>
        body {
            font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            overscroll-behavior: none;
            -webkit-tap-highlight-color: transparent;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
            20%, 40%, 60%, 80% { transform: translateX(8px); }
        }
        .shake { animation: shake 0.5s ease-in-out; }

        .correct-state-static {
            background-color: #22c55e !important; /* green-500 */
            color: white !important;
        }
        .correct-state-static #questionText { display: none !important; }
        .correct-state-static #feedbackText,
        .correct-state-static #feedbackIconContainer { color: white !important; }

        .incorrect-state {
            background-color: #ef4444 !important; /* red-500 */
            color: white !important;
            border-color: #b91c1c !important; /* red-700 */
        }
        .incorrect-state #questionText { display: none !important; }
        .incorrect-state #feedbackText,
        .incorrect-state #feedbackIconContainer { color: white !important; }

        /* NEW: Styles for enhanced incorrect answer feedback */
        .annotated-sentence-container {
            font-size: 1.5rem; /* Large font for the sentence */
            font-weight: 600;
            line-height: 2.5;
            margin-bottom: 1rem;
            color: white;
            background-color: rgba(0, 0, 0, 0.15);
            padding: 1rem;
            border-radius: 0.5rem;
        }
        .word-anno {
            display: inline-block;
            text-align: center;
            margin: 0 0.25rem;
            padding: 0 0.1rem;
        }
        .word-anno .pinyin {
            display: block;
            font-size: 0.9rem;
            font-weight: 400;
            color: #fce7f3; /* A lighter pink/white for pinyin */
        }
        .english-explanation {
            font-style: italic;
            margin-top: 1rem;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
            font-weight: 500;
            color: white;
            padding: 0.5rem;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 0.375rem;
        }
        .explanation-box {
            font-size: 0.9rem;
            display: block;
            margin-top: 0.5rem;
            font-weight: normal;
            background-color: rgba(0, 0, 0, 0.1);
            padding: 0.5rem; border-radius: 0.375rem;
        }
        .prompt-guidance {
             font-size: 0.875rem; display: block; margin-top: 1rem; font-weight: bold;
        }

        .choice-button, .action-button {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
            border-radius: 0.5rem; font-weight: 600;
            padding: 0.75rem 0.5rem; text-align: center;
            border: 1px solid transparent;
        }
        .choice-button:hover:not(:disabled), .action-button:hover {
            transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.12);
        }
        .choice-button:active:not(:disabled), .action-button:active {
            transform: translateY(0px); box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .choice-button:disabled { opacity: 0.7; cursor: not-allowed; transform: none; }
        .choice-button.forced-disabled-look { opacity: 0.5; }
        .choice-button:disabled:hover { transform: none; box-shadow: 0 2px 4px rgba(0,0,0,0.08); }

        .clickable-card { cursor: pointer; }
        #progressBarFill { transition: width 0.3s ease-out; }
        #confettiCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); align-items: center; justify-content: center; }
        .modal-content { background-color: #fefefe; margin: auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 500px; border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

        .race-track-container { position: relative; width: 100%; height: 30px; margin-top: 20px; margin-bottom: 20px; z-index: 1; }
        .race-track { position: absolute; bottom: 0; left: 0; width: calc(100% - 30px); height: 10px; background-color: #d1d5db; border-radius: 5px; z-index: 2; }
        .race-track-fill { position: absolute; bottom: 0; left: 0; height: 10px; background-color: #3b82f6; border-radius: 5px; width: 0%; z-index: 3; transition: width 1.5s ease-out; }
        .rocket { position: absolute; bottom: -8px; left: 0; font-size: 36px; transform: translateX(-50%); z-index: 10; transition: left 1.5s ease-out; }
        .checkered-flag { position: absolute; bottom: -8px; right: 0; font-size: 24px; transform: translateX(50%); z-index: 10; }

        #questionText { word-break: break-word; hyphens: auto; }
        .choice-button { white-space: normal; word-break: break-word; line-height: 1.4; min-height: 60px; display: flex; align-items: center; justify-content: center; }
        
        /* IMPROVEMENT: Bigger text for questions and choices */
        #questionText {
            font-size: 1.75rem; /* was text-2xl */
        }
        @media (min-width: 768px) {
            #questionText {
                font-size: 2rem; /* was md:text-3xl */
            }
        }
        .choice-button {
            font-size: 1.125rem; /* was text-base */
        }
        @media (min-width: 768px) {
            .choice-button {
                font-size: 1.25rem; /* was md:text-lg */
            }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-rose-100 via-amber-100 to-orange-100 min-h-screen flex items-center justify-center p-4">

    <div id="appContainer" class="w-full max-w-md mx-auto">

        <!-- Name Input Modal -->
         <div id="nameModal" class="modal">
             <div class="modal-content text-center">
                 <h2 class="text-xl md:text-2xl font-semibold mb-4 text-red-700">æ¬¢è¿ï¼Œåæ–‡å­¦ä¹ è€…ï¼</h2>
                 <p class="text-slate-600 mb-4">è¯·è¾“å…¥ä½ çš„åå­—ï¼Œå¼€å§‹ä½ çš„PSLEåæ–‡å¤ä¹ ä¹‹æ—…ã€‚</p>
                 <input type="text" id="userNameInput" placeholder="ä½ çš„åå­—" class="w-full p-2 border border-slate-300 rounded mb-4 focus:ring-red-500 focus:border-red-500 text-center text-lg">
                 <button onclick="saveUserName()" class="action-button bg-red-500 hover:bg-red-600 text-white w-full py-3 px-6 text-lg">å¼€å§‹å­¦ä¹ ï¼</button>
             </div>
         </div>

        <!-- Set Selection Screen -->
        <div id="setSelectionScreen" class="hidden bg-white p-6 md:p-8 rounded-xl shadow-lg text-center">
            <h1 class="text-2xl md:text-3xl font-bold text-red-800 mb-2">PSLE åæ–‡ç»ƒä¹ </h1>
            <p class="text-slate-600 mb-8">è¯·é€‰æ‹©ä¸€ä¸ªé¢˜ç»„æ¥å·©å›ºä½ çš„çŸ¥è¯†ï¼</p>
            <div id="setButtonsContainer" class="grid grid-cols-1 gap-4">
                <!-- Buttons for flashcard sets will be dynamically added here by JS -->
            </div>
        </div>

        <!-- Flashcard Screen -->
        <div id="flashcardScreen" class="hidden bg-white p-6 md:p-8 rounded-xl shadow-lg">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-sm font-medium text-slate-600">è¿›åº¦</span>
                    <span id="progressText" class="text-sm font-medium text-red-700">0 / 0</span> </div>
                <div class="w-full bg-slate-200 rounded-full h-2.5">
                    <div id="progressBarFill" class="bg-red-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>

            <div id="flashcard" class="bg-white border border-slate-300 rounded-lg p-6 mb-6 text-center min-h-[200px] flex flex-col items-center justify-center transition-colors duration-300">
                 <div id="flashcardContent" class="w-full flex flex-col items-center justify-center">
                     <div id="feedbackIconContainer" class="hidden text-7xl md:text-8xl mb-2"></div>
                     <p id="questionText" class="font-semibold text-slate-800"></p>
                     <div id="feedbackText" class="mt-2 text-base md:text-lg font-semibold"></div>
                     <p id="continueText" class="mt-4 text-sm text-slate-500 hidden">ç‚¹å‡»å¡ç‰‡ç»§ç»­...</p>
                 </div>
            </div>

            <div id="answerChoices" class="grid grid-cols-1 gap-3 md:gap-4">
                <button id="choice1" class="choice-button bg-slate-100 hover:bg-slate-200 text-slate-700"></button>
                <button id="choice2" class="choice-button bg-slate-100 hover:bg-slate-200 text-slate-700"></button>
                <button id="choice3" class="choice-button bg-slate-100 hover:bg-slate-200 text-slate-700"></button>
            </div>
             <button onclick="showSetSelection()" class="action-button mt-6 bg-slate-500 hover:bg-slate-600 text-white w-full text-sm py-3 px-6">è¿”å›é€‰é¢˜</button>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="hidden bg-white p-6 md:p-8 rounded-xl shadow-lg text-center">
            <h2 id="resultsHeading" class="text-2xl md:text-3xl font-bold text-red-700 mb-4"></h2>
            <div class="bg-emerald-500 text-white p-4 rounded-lg mb-6">
                <p class="text-lg md:text-xl font-semibold mb-1">ä½ çš„åˆ†æ•°:</p>
                <p id="scoreDisplay" class="text-4xl md:text-5xl font-bold italic"></p>
            </div>
            <div class="race-track-container">
                <div class="race-track"></div>
                <div id="raceTrackFill" class="race-track-fill bg-red-500"></div>
                <span id="rocketEl" class="rocket">ğŸš€</span>
                <span id="checkeredFlag" class="checkered-flag">ğŸ</span>
            </div>
            <p class="text-lg text-slate-700 mb-2">æ­£ç¡®ç‡: <span id="percentage" class="font-semibold"></span>%</p>
            <p class="text-lg text-slate-700 mb-6">ç”¨æ—¶: <span id="timeTaken" class="font-semibold"></span> ç§’</p>
            <p id="encouragementText" class="text-lg text-red-700 font-semibold mb-6"></p>
            <div id="incorrectListContainer" class="mb-6 text-left">
                <h3 class="text-xl font-semibold text-red-600 mb-3">å¤ä¹ é”™é¢˜:</h3>
                <ul id="incorrectList" class="list-disc list-inside space-y-2 text-slate-600 text-sm"></ul>
                 <p id="noIncorrectText" class="text-emerald-600 font-semibold hidden">å¤ªæ£’äº†ï¼Œæ²¡æœ‰é”™é¢˜ï¼</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button id="redoIncorrectButton" onclick="redoIncorrect()" class="action-button bg-orange-500 hover:bg-orange-600 text-white w-full py-3 px-6">é‡åšé”™é¢˜</button>
                <button onclick="showSetSelection()" class="action-button bg-red-500 hover:bg-red-600 text-white w-full py-3 px-6">é€‰æ‹©å…¶ä»–é¢˜ç»„</button>
            </div>
        </div>
    </div>
    <canvas id="confettiCanvas"></canvas>

   <script>
    // --- Configuration ---
    const QUESTIONS_PER_SET = 20;
    const AUTO_PROCEED_DELAY = 1800;
    const USER_NAME_STORAGE_KEY = 'psleChineseApp_v2_improved';
    const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwxl5mcaKKp3rXABfN6tMDqzUMCZ7eUTUt3LeoO8xFlwlSTuJqbOMY9vNxwSatucjec/exec';

    // --- NEW FLASHCARD SETS (IMPROVED) ---
    const allFlashcardSets = {
        "ç¬¬ä¸€ç»„ï¼šè¯è¯­è®¤è¯» (Easy)": [
            { id: 'c1q1', question: "â€œæ‹¨æ‰“â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["bÅ dÇ", "bÃ¡ dÇ", "pÅ dÇ"], correctAnswer: "bÅ dÇ", explanation: "â€œæ‹¨æ‰“â€ (bÅ dÇ) æŒ‡æŒ‰ç”µè¯å·ç å‘¼å«ï¼Œå¦‚â€œæ‹¨æ‰“ç”µè¯â€ã€‚", annotatedSentence: `<div class="word-anno">æ‹¨æ‰“<span class="pinyin">bÅ dÇ</span></div>`, englishExplanation: "English: 'æ‹¨' (bÅ) means to dial or push aside. Combined with 'æ‰“' (dÇ), 'æ‹¨æ‰“' (bÅ dÇ) specifically means to dial a phone." },
            { id: 'c1q2', question: "â€œæ­ªæ–œâ€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["æ•´é½", "ä¸æ­£ï¼Œåç¦»ä¸­å¿ƒ", "ç¬”ç›´"], correctAnswer: "ä¸æ­£ï¼Œåç¦»ä¸­å¿ƒ", explanation: "â€œæ­ªæ–œâ€ (wÄi xiÃ©) å½¢å®¹ç‰©ä½“ä¸æ­£æˆ–å€¾æ–œã€‚", annotatedSentence: `<div class="word-anno">æ­ªæ–œ<span class="pinyin">wÄi xiÃ©</span></div>`, englishExplanation: "English: 'æ­ª' (wÄi) means askew, and 'æ–œ' (xiÃ©) means slanted. Together, 'æ­ªæ–œ' (wÄi xiÃ©) describes something that is crooked or tilted." },
            { id: 'c1q3', question: "â€œè¸©è¸â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["cÇi tÃ ", "chÇi tÃ ", "cÇi dÃ "], correctAnswer: "cÇi tÃ ", explanation: "â€œè¸©è¸â€ (cÇi tÃ ) æŒ‡ç”¨åŠ›åœ°è¸©ï¼Œå¦‚â€œè¯·å‹¿è¸©è¸è‰åœ°â€ã€‚", annotatedSentence: `<div class="word-anno">è¸©è¸<span class="pinyin">cÇi tÃ </span></div>`, englishExplanation: "English: 'è¸©' (cÇi) means to step on, and 'è¸' (tÃ ) also means to step. 'è¸©è¸' (cÇi tÃ ) implies repeated or heavy stepping, i.e., to trample." },
            { id: 'c1q4', question: "â€œç‰µå¼•â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["æ¨å¼€", "æ‹‰ç€å‘å‰", "åœæ­¢"], correctAnswer: "æ‹‰ç€å‘å‰", explanation: "â€œç‰µå¼•â€ (qiÄn yÇn) çš„æ„æ€æ˜¯æ‹‰ç€ç‰©ä½“ï¼Œä½¿å®ƒå‰è¿›ã€‚", annotatedSentence: `<div class="word-anno">ç‰µå¼•<span class="pinyin">qiÄn yÇn</span></div>`, englishExplanation: "English: 'ç‰µ' (qiÄn) is to pull and 'å¼•' (yÇn) is to guide. 'ç‰µå¼•' (qiÄn yÇn) means to tow or pull something forward." },
            { id: 'c1q5', question: "â€œç…ç†¬â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["jiÄn Ã¡o", "qiÃ¡n Ã¡o", "jiÄn Äo"], correctAnswer: "jiÄn Ã¡o", explanation: "â€œç…ç†¬â€ (jiÄn Ã¡o) æ¯”å–»ç„¦è™‘ã€ç—›è‹¦çš„æŠ˜ç£¨ã€‚", annotatedSentence: `<div class="word-anno">ç…ç†¬<span class="pinyin">jiÄn Ã¡o</span></div>`, englishExplanation: "English: While 'ç…' (jiÄn) means to pan-fry, 'ç…ç†¬' (jiÄn Ã¡o) is a metaphor for suffering or torment, like being slowly cooked." },
            { id: 'c1q6', question: "â€œè„†å¼±â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["åšå›º", "ä¸åšå¼ºï¼Œæ˜“å—ä¼¤å®³", "æœ‰å¼¹æ€§"], correctAnswer: "ä¸åšå¼ºï¼Œæ˜“å—ä¼¤å®³", explanation: "â€œè„†å¼±â€ (cuÃ¬ ruÃ²) å½¢å®¹ä¸åšå¼ºï¼Œå®¹æ˜“æŸåæˆ–å—åˆ°ä¼¤å®³ã€‚", annotatedSentence: `<div class="word-anno">è„†å¼±<span class="pinyin">cuÃ¬ ruÃ²</span></div>`, englishExplanation: "English: 'è„†' (cuÃ¬) means brittle and 'å¼±' (ruÃ²) means weak. 'è„†å¼±' (cuÃ¬ ruÃ²) describes something or someone as fragile or vulnerable." },
            { id: 'c1q7', question: "â€œé€›è¡—â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["guÃ ng jiÄ“", "kuÃ ng jiÄ“", "guÄng jiÄ“"], correctAnswer: "guÃ ng jiÄ“", explanation: "â€œé€›è¡—â€ (guÃ ng jiÄ“) æ˜¯åœ¨è¡—ä¸Šé—²é€›ã€è´­ç‰©ã€‚", annotatedSentence: `<div class="word-anno">é€›è¡—<span class="pinyin">guÃ ng jiÄ“</span></div>`, englishExplanation: "English: 'é€›' (guÃ ng) means to stroll or wander. 'é€›è¡—' (guÃ ng jiÄ“) is the common term for window shopping or shopping in general." },
            { id: 'c1q8', question: "â€œä»·æ ¼â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["ç‰©å“çš„é‡é‡", "ç‰©å“ä¹°å–çš„é’±æ•°", "ç‰©å“çš„é¢œè‰²"], correctAnswer: "ç‰©å“ä¹°å–çš„é’±æ•°", explanation: "â€œä»·æ ¼â€ (jiÃ  gÃ©) å°±æ˜¯ä¸€ä»¶å•†å“å€¼å¤šå°‘é’±ã€‚", annotatedSentence: `<div class="word-anno">ä»·æ ¼<span class="pinyin">jiÃ  gÃ©</span></div>`, englishExplanation: "English: 'ä»·' (jiÃ ) relates to price and 'æ ¼' (gÃ©) relates to a standard or form. 'ä»·æ ¼' (jiÃ  gÃ©) means price." },
            { id: 'c1q9', question: "â€œè´ªå¿ƒâ€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["tÄn xÄ«n", "tÃ¡n xÄ«n", "dÄn xÄ«n"], correctAnswer: "tÄn xÄ«n", explanation: "â€œè´ªå¿ƒâ€ (tÄn xÄ«n) æŒ‡çš„æ˜¯è´ªå¾—æ— åŒçš„æ¬²æœ›ã€‚", annotatedSentence: `<div class="word-anno">è´ªå¿ƒ<span class="pinyin">tÄn xÄ«n</span></div>`, englishExplanation: "English: 'è´ª' (tÄn) means greedy and 'å¿ƒ' (xÄ«n) means heart. 'è´ªå¿ƒ' (tÄn xÄ«n) literally translates to 'greedy heart' and means greed." },
            { id: 'c1q10', question: "â€œç¬¨é‡â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["è½»ä¾¿çµæ´»", "åˆç¬¨åˆé‡ï¼Œä¸çµä¾¿", "èªæ˜"], correctAnswer: "åˆç¬¨åˆé‡ï¼Œä¸çµä¾¿", explanation: "â€œç¬¨é‡â€ (bÃ¨n zhÃ²ng) å½¢å®¹ç‰©ä½“åˆå¤§åˆé‡ï¼Œä¸æ˜“æ¬åŠ¨ï¼›ä¹Ÿå½¢å®¹äººåŠ¨ä½œä¸çµæ´»ã€‚", annotatedSentence: `<div class="word-anno">ç¬¨é‡<span class="pinyin">bÃ¨n zhÃ²ng</span></div>`, englishExplanation: "English: 'ç¬¨' (bÃ¨n) means clumsy and 'é‡' (zhÃ²ng) means heavy. 'ç¬¨é‡' (bÃ¨n zhÃ²ng) describes something as bulky, heavy, and unwieldy." },
            { id: 'c1q11', question: "â€œæƒ©ç½šâ€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["chÃ©ng fÃ¡", "chÄ›ng fÃ¡", "chÃ©ng bÃ "], correctAnswer: "chÃ©ng fÃ¡", explanation: "â€œæƒ©ç½šâ€ (chÃ©ng fÃ¡) æŒ‡å¯¹çŠ¯é”™è¯¯çš„äººæˆ–äº‹è¿›è¡Œå¤„ç½šã€‚", annotatedSentence: `<div class="word-anno">æƒ©ç½š<span class="pinyin">chÃ©ng fÃ¡</span></div>`, englishExplanation: "English: 'æƒ©' (chÃ©ng) and 'ç½š' (fÃ¡) both mean to punish. 'æƒ©ç½š' (chÃ©ng fÃ¡) is the common word for punishment." },
            { id: 'c1q12', question: "â€œæ°å‡ºâ€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¹³å‡¡", "æ‰èƒ½ã€æˆå°±å‡ºä¼—", "å®³ç¾"], correctAnswer: "æ‰èƒ½ã€æˆå°±å‡ºä¼—", explanation: "â€œæ°å‡ºâ€ (jiÃ© chÅ«) å½¢å®¹äººçš„æ‰èƒ½æˆ–æˆå°±éå¸¸ä¼˜ç§€ã€è¶…å‡ºä¸€èˆ¬ã€‚", annotatedSentence: `<div class="word-anno">æ°å‡º<span class="pinyin">jiÃ© chÅ«</span></div>`, englishExplanation: "English: 'æ°' (jiÃ©) means heroic or outstanding, and 'å‡º' (chÅ«) means to go beyond. 'æ°å‡º' (jiÃ© chÅ«) means outstanding or distinguished." },
            { id: 'c1q13', question: "â€œå‚¬ä¿ƒâ€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["cuÄ« cÃ¹", "suÄ« cÃ¹", "tuÄ« cÃ¹"], correctAnswer: "cuÄ« cÃ¹", explanation: "â€œå‚¬ä¿ƒâ€ (cuÄ« cÃ¹) çš„æ„æ€æ˜¯å«äººèµ¶å¿«è¡ŒåŠ¨æˆ–åšäº‹ã€‚", annotatedSentence: `<div class="word-anno">å‚¬ä¿ƒ<span class="pinyin">cuÄ« cÃ¹</span></div>`, englishExplanation: "English: Both 'å‚¬' (cuÄ«) and 'ä¿ƒ' (cÃ¹) mean to urge or press. 'å‚¬ä¿ƒ' (cuÄ« cÃ¹) means to urge someone to hurry up." },
            { id: 'c1q14', question: "â€œè…¹æ³»â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å¤´ç—›", "æ‹‰è‚šå­", "å’³å—½"], correctAnswer: "æ‹‰è‚šå­", explanation: "â€œè…¹æ³»â€ (fÃ¹ xiÃ¨) æ˜¯åŒ»å­¦åè¯ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„â€œæ‹‰è‚šå­â€ã€‚", annotatedSentence: `<div class="word-anno">è…¹æ³»<span class="pinyin">fÃ¹ xiÃ¨</span></div>`, englishExplanation: "English: 'è…¹' (fÃ¹) means abdomen, and 'æ³»' (xiÃ¨) means to flow down quickly. 'è…¹æ³»' (fÃ¹ xiÃ¨) is the formal term for diarrhea." },
            { id: 'c1q15', question: "â€œä¸¥å‰â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["yÃ¡n lÃ¬", "yÃ¡n le", "yÃ¡n nÃ¬"], correctAnswer: "yÃ¡n lÃ¬", explanation: "â€œä¸¥å‰â€ (yÃ¡n lÃ¬) å½¢å®¹æ€åº¦ä¸¥è‚ƒã€ä¸¥æ ¼ï¼Œä¸å®½å®¹ã€‚", annotatedSentence: `<div class="word-anno">ä¸¥å‰<span class="pinyin">yÃ¡n lÃ¬</span></div>`, englishExplanation: "English: 'ä¸¥' (yÃ¡n) means strict, and 'å‰' (lÃ¬) means severe. 'ä¸¥å‰' (yÃ¡n lÃ¬) describes someone or something as strict or stern." },
            { id: 'c1q16', question: "â€œåŒ…å«â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["æ’é™¤åœ¨å¤–", "é‡Œé¢å«æœ‰", "å®Œå…¨ç­‰äº"], correctAnswer: "é‡Œé¢å«æœ‰", explanation: "â€œåŒ…å«â€ (bÄo hÃ¡n) çš„æ„æ€æ˜¯åœ¨é‡Œé¢è—ç€æˆ–åŒ…æ‹¬ç€ã€‚", annotatedSentence: `<div class="word-anno">åŒ…å«<span class="pinyin">bÄo hÃ¡n</span></div>`, englishExplanation: "English: 'åŒ…' (bÄo) means to wrap or include, and 'å«' (hÃ¡n) means to contain. 'åŒ…å«' (bÄo hÃ¡n) means to contain or include." },
            { id: 'c1q17', question: "â€œè½¯å¼±â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["ruÇn ruÃ²", "nÇn ruÃ²", "ruÇn nuÃ²"], correctAnswer: "ruÇn ruÃ²", explanation: "â€œè½¯å¼±â€ (ruÇn ruÃ²) æŒ‡èº«ä½“æ— åŠ›ï¼Œæˆ–æ€§æ ¼ä¸åšå¼ºã€‚", annotatedSentence: `<div class="word-anno">è½¯å¼±<span class="pinyin">ruÇn ruÃ²</span></div>`, englishExplanation: "English: 'è½¯' (ruÇn) means soft, and 'å¼±' (ruÃ²) means weak. 'è½¯å¼±' (ruÇn ruÃ²) describes physical weakness or a weak character." },
            { id: 'c1q18', question: "â€œæ‡’æƒ°â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["å‹¤å¥‹åŠªåŠ›", "ä¸çˆ±åŠ³åŠ¨å’Œå·¥ä½œ", "éå¸¸ç–²åŠ³"], correctAnswer: "ä¸çˆ±åŠ³åŠ¨å’Œå·¥ä½œ", explanation: "â€œæ‡’æƒ°â€ (lÇn duÃ²) æ˜¯æŒ‡ä¸å‹¤å¿«ï¼Œä¸å–œæ¬¢åšäº‹ã€‚", annotatedSentence: `<div class="word-anno">æ‡’æƒ°<span class="pinyin">lÇn duÃ²</span></div>`, englishExplanation: "English: 'æ‡’' (lÇn) and 'æƒ°' (duÃ²) both mean lazy. 'æ‡’æƒ°' (lÇn duÃ²) is the standard word for lazy or indolent." },
            { id: 'c1q19', question: "â€œæ•æ·â€ çš„æ‹¼éŸ³æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["mÇn jiÃ©", "mÇn jiÄ“", "mÃ­ng jiÃ©"], correctAnswer: "mÇn jiÃ©", explanation: "â€œæ•æ·â€ (mÇn jiÃ©) å½¢å®¹åŠ¨ä½œã€æ€ç»´ç­‰è¿…é€Ÿè€Œçµæ•ã€‚", annotatedSentence: `<div class="word-anno">æ•æ·<span class="pinyin">mÇn jiÃ©</span></div>`, englishExplanation: "English: 'æ•' (mÇn) means quick/nimble, and 'æ·' (jiÃ©) means swift. 'æ•æ·' (mÇn jiÃ©) means agile, nimble, or quick-witted." },
            { id: 'c1q20', question: "â€œè´¨é‡â€ çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ", options: ["ç‰©å“çš„æ•°é‡", "ç‰©å“çš„ä¼˜åŠ£ç¨‹åº¦", "ç‰©å“çš„é‡é‡"], correctAnswer: "ç‰©å“çš„ä¼˜åŠ£ç¨‹åº¦", explanation: "â€œè´¨é‡â€ (zhÃ¬ liÃ ng) æŒ‡çš„æ˜¯äº§å“æˆ–å·¥ä½œçš„å“è´¨å¥½åã€‚", annotatedSentence: `<div class="word-anno">è´¨é‡<span class="pinyin">zhÃ¬ liÃ ng</span></div>`, englishExplanation: "English: 'è´¨' (zhÃ¬) means quality/nature, and 'é‡' (liÃ ng) means quantity. 'è´¨é‡' (zhÃ¬ liÃ ng) specifically refers to the quality of an item." }
        ],
        "ç¬¬äºŒç»„ï¼šè¯è¯­åº”ç”¨ (Medium)": [
            { id: 'c2q1', question: "çœ‹åˆ°è¿™ä¸ªå¥½æ¶ˆæ¯ï¼Œå¤§å®¶è„¸ä¸Šéƒ½ï¼ˆ ï¼‰å‡ºäº†ç¬‘å®¹ã€‚", options: ["é€éœ²", "ç‰µåŠ¨", "æ¨¡ä»¿"], correctAnswer: "é€éœ²", 
              explanation: "â€œé€éœ²â€(tÃ²u lÃ¹) æ„æ€æ˜¯æ˜¾éœ²å‡ºæ¥ã€‚â€œç‰µåŠ¨â€æ˜¯æ‹‰åŠ¨ï¼Œâ€œæ¨¡ä»¿â€æ˜¯å­¦åˆ«äººçš„æ ·å­ã€‚", 
              annotatedSentence: `<span class="word-anno">å¤§å®¶<span class="pinyin">dÃ  jiÄ</span></span><span class="word-anno">è„¸ä¸Š<span class="pinyin">liÇn shÃ ng</span></span><span class="word-anno">éƒ½<span class="pinyin">dÅu</span></span><span class="word-anno">é€éœ²<span class="pinyin">tÃ²u lÃ¹</span></span><span class="word-anno">å‡º<span class="pinyin">chÅ«</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span><span class="word-anno">ç¬‘å®¹<span class="pinyin">xiÃ o rÃ³ng</span></span>`, 
              englishExplanation: "English: 'é€éœ²' (tÃ²u lÃ¹) means 'to reveal' or 'to show'. It fits here to describe how happiness was revealed through their smiles." },
            { id: 'c2q2', question: "å¦ˆå¦ˆåšçš„ç‚¸é¸¡åˆé¦™åˆï¼ˆ ï¼‰ï¼Œæˆ‘æœ€å–œæ¬¢åƒäº†ã€‚", options: ["ç¡¬", "è„†", "é…¸"], correctAnswer: "è„†", 
              explanation: "â€œé¦™è„†â€(xiÄng cuÃ¬) æ˜¯å½¢å®¹é£Ÿç‰©å¯å£çš„å¥½è¯ã€‚â€œç¡¬â€(yÃ¬ng) æ˜¯ä¸è½¯ï¼Œâ€œé…¸â€(suÄn) æ˜¯ä¸€ç§å‘³é“ã€‚", 
              annotatedSentence: `<span class="word-anno">ç‚¸é¸¡<span class="pinyin">zhÃ  jÄ«</span></span><span class="word-anno">åˆ<span class="pinyin">yÃ²u</span></span><span class="word-anno">é¦™<span class="pinyin">xiÄng</span></span><span class="word-anno">åˆ<span class="pinyin">yÃ²u</span></span><span class="word-anno">è„†<span class="pinyin">cuÃ¬</span></span>`, 
              englishExplanation: "English: 'è„†' (cuÃ¬) means 'crispy'. The phrase 'åˆé¦™åˆè„†' (yÃ²u xiÄng yÃ²u cuÃ¬ - both fragrant and crispy) is a common way to describe delicious fried food." },
            { id: 'c2q3', question: "ä¸ºäº†ä¹°åˆ°é‚£ä»¶é™é‡ç‰ˆçš„ç©å…·ï¼Œå“¥å“¥ä¸€å¤§æ—©å°±å»å•†åº—ï¼ˆ ï¼‰äº†ã€‚", options: ["æ’é˜Ÿ", "æ’é˜Ÿ", "æŒ¤é˜Ÿ"], correctAnswer: "æ’é˜Ÿ", 
              explanation: "â€œæ’é˜Ÿâ€(pÃ¡i duÃ¬) æ˜¯æœ‰ç§©åºåœ°ç«™æˆä¸€åˆ—ç­‰å¾…ã€‚â€œæ’é˜Ÿâ€æ˜¯ä¸ç¤¼è²Œçš„è¡Œä¸ºã€‚", 
              annotatedSentence: `<span class="word-anno">å“¥å“¥<span class="pinyin">gÄ“ ge</span></span><span class="word-anno">å»<span class="pinyin">qÃ¹</span></span><span class="word-anno">å•†åº—<span class="pinyin">shÄng diÃ n</span></span><span class="word-anno">æ’é˜Ÿ<span class="pinyin">pÃ¡i duÃ¬</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span>`, 
              englishExplanation: "English: 'æ’é˜Ÿ' (pÃ¡i duÃ¬) means 'to queue' or 'to line up', which is the expected action when waiting to buy something." },
            { id: 'c2q4', question: "è¿™å®¶å•†åº—çš„å•†å“ï¼ˆ ï¼‰å¾ˆå…¬é“ï¼Œå› æ­¤å¸å¼•äº†å¾ˆå¤šé¡¾å®¢ã€‚", options: ["ä»·æ ¼", "ä»·å€¼", "å‡è´§"], correctAnswer: "ä»·æ ¼", 
              explanation: "â€œä»·æ ¼â€(jiÃ  gÃ©) æŒ‡å•†å“å–å¤šå°‘é’±ã€‚â€œä»·å€¼â€æ˜¯æ„ä¹‰æˆ–ä½œç”¨ã€‚", 
              annotatedSentence: `<span class="word-anno">å•†å“<span class="pinyin">shÄng pÇn</span></span><span class="word-anno">ä»·æ ¼<span class="pinyin">jiÃ  gÃ©</span></span><span class="word-anno">å¾ˆ<span class="pinyin">hÄ›n</span></span><span class="word-anno">å…¬é“<span class="pinyin">gÅng dao</span></span>`, 
              englishExplanation: "English: 'ä»·æ ¼' (jiÃ  gÃ©) means 'price'. The sentence says the price is 'å…¬é“' (gÅng dao - fair/reasonable), which makes sense in context." },
            { id: 'c2q5', question: "ä»–å› ä¸ºä¸è‚¯æ‰¿è®¤é”™è¯¯ï¼Œæ‰€ä»¥å—åˆ°äº†è€å¸ˆçš„ï¼ˆ ï¼‰ã€‚", options: ["æƒ©ç½š", "å¥–åŠ±", "è¡¨æ‰¬"], correctAnswer: "æƒ©ç½š", 
              explanation: "â€œæƒ©ç½šâ€(chÃ©ng fÃ¡) æ˜¯å¯¹é”™è¯¯è¡Œä¸ºçš„å¤„ç½šã€‚â€œå¥–åŠ±â€å’Œâ€œè¡¨æ‰¬â€æ˜¯å¯¹è‰¯å¥½è¡Œä¸ºçš„è‚¯å®šã€‚", 
              annotatedSentence: `<span class="word-anno">å—åˆ°<span class="pinyin">shÃ²u dÃ o</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span><span class="word-anno">è€å¸ˆ<span class="pinyin">lÇo shÄ«</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">æƒ©ç½š<span class="pinyin">chÃ©ng fÃ¡</span></span>`, 
              englishExplanation: "English: 'æƒ©ç½š' (chÃ©ng fÃ¡) means 'punishment'. It is the logical consequence of not admitting one's mistake." },
            { id: 'c2q6', question: "æ¶ˆé˜²å‘˜ï¼ˆ ï¼‰åœ°å†²è¿›ç«åœºæ•‘äººï¼Œå¤§å®¶éƒ½éå¸¸æ•¬ä½©ä»–ä»¬ã€‚", options: ["å‹‡æ•¢", "å®³æ€•", "èƒ†å°"], correctAnswer: "å‹‡æ•¢", 
              explanation: "â€œå‹‡æ•¢â€(yÇ’ng gÇn) æ˜¯æŒ‡ä¸æ€•å±é™©å’Œå›°éš¾ã€‚è¿™ç¬¦åˆæ¶ˆé˜²å‘˜çš„è¡Œä¸ºã€‚", 
              annotatedSentence: `<span class="word-anno">æ¶ˆé˜²å‘˜<span class="pinyin">xiÄo fÃ¡ng yuÃ¡n</span></span><span class="word-anno">å‹‡æ•¢<span class="pinyin">yÇ’ng gÇn</span></span><span class="word-anno">åœ°<span class="pinyin">de</span></span><span class="word-anno">å†²è¿›<span class="pinyin">chÅng jÃ¬n</span></span><span class="word-anno">ç«åœº<span class="pinyin">huÇ’ chÇng</span></span>`, 
              englishExplanation: "English: 'å‹‡æ•¢' (yÇ’ng gÇn) means 'brave'. This word accurately describes the heroic action of firefighters rushing into a fire." },
            { id: 'c2q7', question: "åœ¨è¿™æ¬¡çš„æ¯”èµ›ä¸­ï¼Œæˆ‘ä»¬ç­ï¼ˆ ï¼‰äº†å† å†›ã€‚", options: ["èµ¢å¾—", "è¾“æ‰", "å¤±å»"], correctAnswer: "èµ¢å¾—", 
              explanation: "â€œèµ¢å¾—â€(yÃ­ng dÃ©) æ˜¯é€šè¿‡åŠªåŠ›è·å¾—èƒœåˆ©æˆ–å¥½çš„ç»“æœã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘ä»¬<span class="pinyin">wÇ’ men</span></span><span class="word-anno">ç­<span class="pinyin">bÄn</span></span><span class="word-anno">èµ¢å¾—<span class="pinyin">yÃ­ng dÃ©</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span><span class="word-anno">å† å†›<span class="pinyin">guÃ n jÅ«n</span></span>`, 
              englishExplanation: "English: 'èµ¢å¾—' (yÃ­ng dÃ©) means 'to win'. It is the correct verb to use for winning a championship ('å† å†›')." },
            { id: 'c2q8', question: "è¿‡é©¬è·¯æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ï¼ˆ ï¼‰äº¤é€šè§„åˆ™ã€‚", options: ["éµå®ˆ", "è¿å", "å¿½ç•¥"], correctAnswer: "éµå®ˆ", 
              explanation: "â€œéµå®ˆâ€(zÅ«n shÇ’u) æ˜¯ä¾ç…§è§„å®šè¡ŒåŠ¨ã€‚ä¸ºäº†å®‰å…¨ï¼Œå¿…é¡»éµå®ˆäº¤é€šè§„åˆ™ã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘ä»¬<span class="pinyin">wÇ’ men</span></span><span class="word-anno">åº”è¯¥<span class="pinyin">yÄ«ng gÄi</span></span><span class="word-anno">éµå®ˆ<span class="pinyin">zÅ«n shÇ’u</span></span><span class="word-anno">äº¤é€š<span class="pinyin">jiÄo tÅng</span></span><span class="word-anno">è§„åˆ™<span class="pinyin">guÄ« zÃ©</span></span>`, 
              englishExplanation: "English: 'éµå®ˆ' (zÅ«n shÇ’u) means 'to abide by' or 'to comply with'. It is used with rules ('è§„åˆ™')." },
            { id: 'c2q9', question: "å¬äº†çˆ·çˆ·è®²çš„æ•…äº‹ï¼Œæˆ‘å¿ƒé‡Œçš„ï¼ˆ ï¼‰å…¨éƒ½æ¶ˆå¤±äº†ã€‚", options: ["ç–‘æƒ‘", "é—®é¢˜", "éº»çƒ¦"], correctAnswer: "ç–‘æƒ‘", 
              explanation: "â€œç–‘æƒ‘â€(yÃ­ huÃ²) æ˜¯æŒ‡å¿ƒé‡Œä¸æ˜ç™½ï¼Œæœ‰ç–‘é—®ã€‚â€œé—®é¢˜â€æ›´å…·ä½“ï¼Œâ€œéº»çƒ¦â€æ˜¯å›°éš¾çš„äº‹ã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘<span class="pinyin">wÇ’</span></span><span class="word-anno">å¿ƒé‡Œ<span class="pinyin">xÄ«n lÇ</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">ç–‘æƒ‘<span class="pinyin">yÃ­ huÃ²</span></span><span class="word-anno">å…¨éƒ½<span class="pinyin">quÃ¡n dÅu</span></span><span class="word-anno">æ¶ˆå¤±<span class="pinyin">xiÄo shÄ«</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span>`, 
              englishExplanation: "English: 'ç–‘æƒ‘' (yÃ­ huÃ²) means 'doubt' or 'puzzlement'. It's a feeling of uncertainty that can be cleared up by a story or explanation." },
            { id: 'c2q10', question: "å¤–é¢ä¸‹ç€å€¾ç›†å¤§é›¨ï¼Œè·¯äººåªå¥½æš‚æ—¶ï¼ˆ ï¼‰åœ¨å±‹æªä¸‹ã€‚", options: ["èº²é¿", "éšè—", "å¥”è·‘"], correctAnswer: "èº²é¿", 
              explanation: "â€œèº²é¿â€(duÇ’ bÃ¬) æ˜¯ä¸ºäº†ä¸å—ä¼¤å®³è€Œèº²å¼€ã€‚â€œéšè—â€æ˜¯è—èµ·æ¥ä¸è®©äººå‘ç°ã€‚", 
              annotatedSentence: `<span class="word-anno">è·¯äºº<span class="pinyin">lÃ¹ rÃ©n</span></span><span class="word-anno">åªå¥½<span class="pinyin">zhÇ hÇo</span></span><span class="word-anno">æš‚æ—¶<span class="pinyin">zÃ n shÃ­</span></span><span class="word-anno">èº²é¿<span class="pinyin">duÇ’ bÃ¬</span></span><span class="word-anno">åœ¨<span class="pinyin">zÃ i</span></span><span class="word-anno">å±‹æª<span class="pinyin">wÅ« yÃ¡n</span></span><span class="word-anno">ä¸‹<span class="pinyin">xiÃ </span></span>`, 
              englishExplanation: "English: 'èº²é¿' (duÇ’ bÃ¬) means 'to take shelter' or 'to dodge'. It's the right action for people avoiding a heavy downpour." },
            { id: 'c2q11', question: "åŒ»ç”Ÿä»”ç»†åœ°ä¸ºç—…äººï¼ˆ ï¼‰ï¼Œå¸Œæœ›èƒ½æ‰¾å‡ºç—…å› ã€‚", options: ["æ£€æŸ¥", "æ²»ç–—", "çœ‹æœ›"], correctAnswer: "æ£€æŸ¥", 
              explanation: "â€œæ£€æŸ¥â€(jiÇn chÃ¡) æ˜¯ä¸ºäº†äº†è§£æƒ…å†µè€ŒæŸ¥çœ‹ã€‚â€œæ²»ç–—â€æ˜¯åœ¨æ£€æŸ¥ä¹‹åè¿›è¡Œçš„ã€‚", 
              annotatedSentence: `<span class="word-anno">åŒ»ç”Ÿ<span class="pinyin">yÄ« shÄ“ng</span></span><span class="word-anno">ä¸º<span class="pinyin">wÃ¨i</span></span><span class="word-anno">ç—…äºº<span class="pinyin">bÃ¬ng rÃ©n</span></span><span class="word-anno">æ£€æŸ¥<span class="pinyin">jiÇn chÃ¡</span></span>`, 
              englishExplanation: "English: 'æ£€æŸ¥' (jiÇn chÃ¡) means 'to examine' or 'to check'. A doctor examines a patient to find the cause ('ç—…å› ') of an illness." },
            { id: 'c2q12', question: "æˆ‘ä»¬è¦å…»æˆï¼ˆ ï¼‰çš„å¥½ä¹ æƒ¯ï¼Œä¸æµªè´¹èµ„æºã€‚", options: ["å‹¤åŠ³", "å‹¤å¿«", "å‹¤ä¿­"], correctAnswer: "å‹¤ä¿­", 
              explanation: "â€œå‹¤ä¿­â€(qÃ­n jiÇn) æŒ‡æ—¢å‹¤åŠ³åˆèŠ‚çº¦ã€‚â€œå‹¤åŠ³â€å’Œâ€œå‹¤å¿«â€åªå¼ºè°ƒä¸æ‡’æƒ°ã€‚", 
              annotatedSentence: `<span class="word-anno">å…»æˆ<span class="pinyin">yÇng chÃ©ng</span></span><span class="word-anno">å‹¤ä¿­<span class="pinyin">qÃ­n jiÇn</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">å¥½<span class="pinyin">hÇo</span></span><span class="word-anno">ä¹ æƒ¯<span class="pinyin">xÃ­ guÃ n</span></span>`, 
              englishExplanation: "English: 'å‹¤ä¿­' (qÃ­n jiÇn) means 'diligent and frugal'. It's the most precise word as the sentence mentions both forming a good habit and not wasting resources." },
            { id: 'c2q13', question: "ä»–æ˜¯ä¸ªï¼ˆ ï¼‰çš„å­©å­ï¼Œä»ä¸è¯´è°ã€‚", options: ["è¯šå®", "è™šå‡", "ç‹¡çŒ¾"], correctAnswer: "è¯šå®", 
              explanation: "â€œè¯šå®â€(chÃ©ng shÃ­) æŒ‡çš„æ˜¯ä¸è¯´è°ï¼Œä¸éª—äººã€‚", 
              annotatedSentence: `<span class="word-anno">ä»–<span class="pinyin">tÄ</span></span><span class="word-anno">æ˜¯<span class="pinyin">shÃ¬</span></span><span class="word-anno">ä¸ª<span class="pinyin">gÃ¨</span></span><span class="word-anno">è¯šå®<span class="pinyin">chÃ©ng shÃ­</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">å­©å­<span class="pinyin">hÃ¡i zi</span></span>`, 
              englishExplanation: "English: 'è¯šå®' (chÃ©ng shÃ­) means 'honest'. The clue 'ä»ä¸è¯´è°' (cÃ³ng bÃ¹ shuÅ huÇng - never tells lies) directly points to this answer." },
            { id: 'c2q14', question: "å§å§çš„é’¢ç´è¡¨æ¼”éå¸¸ï¼ˆ ï¼‰ï¼Œè·å¾—äº†è§‚ä¼—çƒ­çƒˆçš„æŒå£°ã€‚", options: ["æˆåŠŸ", "èƒœåˆ©", "å®Œæˆ"], correctAnswer: "æˆåŠŸ", 
              explanation: "â€œæˆåŠŸâ€(chÃ©ng gÅng) å½¢å®¹äº‹æƒ…è¾¾åˆ°äº†é¢„æœŸçš„å¥½ç»“æœã€‚â€œèƒœåˆ©â€å¤šç”¨äºæ¯”èµ›æˆ–æˆ˜äº‰ã€‚", 
              annotatedSentence: `<span class="word-anno">é’¢ç´<span class="pinyin">gÄng qÃ­n</span></span><span class="word-anno">è¡¨æ¼”<span class="pinyin">biÇo yÇn</span></span><span class="word-anno">éå¸¸<span class="pinyin">fÄ“i chÃ¡ng</span></span><span class="word-anno">æˆåŠŸ<span class="pinyin">chÃ©ng gÅng</span></span>`, 
              englishExplanation: "English: 'æˆåŠŸ' (chÃ©ng gÅng) means 'successful'. It is used to describe an event or performance that went very well, as indicated by the applause." },
            { id: 'c2q15', question: "ä¸ºäº†ä¿æŠ¤ç¯å¢ƒï¼Œæˆ‘ä»¬åº”è¯¥ï¼ˆ ï¼‰ä½¿ç”¨å¡‘æ–™è¢‹ã€‚", options: ["å¢åŠ ", "å‡å°‘", "åœæ­¢"], correctAnswer: "å‡å°‘", 
              explanation: "â€œå‡å°‘â€(jiÇn shÇo) ä½¿ç”¨æ˜¯ç¯ä¿çš„æœ‰æ•ˆæ–¹æ³•ã€‚â€œåœæ­¢â€ä½¿ç”¨å¯èƒ½ä¸ç°å®ï¼Œä½†å‡å°‘æ˜¯å¯è¡Œçš„ã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘ä»¬<span class="pinyin">wÇ’ men</span></span><span class="word-anno">åº”è¯¥<span class="pinyin">yÄ«ng gÄi</span></span><span class="word-anno">å‡å°‘<span class="pinyin">jiÇn shÇo</span></span><span class="word-anno">ä½¿ç”¨<span class="pinyin">shÇ yÃ²ng</span></span><span class="word-anno">å¡‘æ–™è¢‹<span class="pinyin">sÃ¹ liÃ o dÃ i</span></span>`, 
              englishExplanation: "English: 'å‡å°‘' (jiÇn shÇo) means 'to reduce'. This aligns with the environmental goal of using fewer plastic bags." },
            { id: 'c2q16', question: "ä»–åœ¨å°ä¸Šæ¼”è®²æ—¶æœ‰äº›ï¼ˆ ï¼‰ï¼Œè¯´è¯æœ‰ç‚¹å‘æŠ–ã€‚", options: ["ç´§å¼ ", "å…´å¥‹", "æ¿€åŠ¨"], correctAnswer: "ç´§å¼ ", 
              explanation: "â€œç´§å¼ â€(jÇn zhÄng) æ—¶ï¼Œäººä¼šå¿ƒè·³åŠ é€Ÿï¼Œèº«ä½“å‘æŠ–ã€‚â€œå…´å¥‹â€å’Œâ€œæ¿€åŠ¨â€æ˜¯å¼€å¿ƒçš„æƒ…ç»ªã€‚", 
              annotatedSentence: `<span class="word-anno">æ¼”è®²<span class="pinyin">yÇn jiÇng</span></span><span class="word-anno">æ—¶<span class="pinyin">shÃ­</span></span><span class="word-anno">æœ‰äº›<span class="pinyin">yÇ’u xiÄ“</span></span><span class="word-anno">ç´§å¼ <span class="pinyin">jÇn zhÄng</span></span>`, 
              englishExplanation: "English: 'ç´§å¼ ' (jÇn zhÄng) means 'nervous'. The clue 'è¯´è¯æœ‰ç‚¹å‘æŠ–' (speaking with a slight tremble) is a classic sign of nervousness." },
            { id: 'c2q17', question: "è¿™æ¬¡æ—…è¡Œï¼Œæˆ‘ä»¬ï¼ˆ ï¼‰äº†å¾ˆå¤šç¾ä¸½çš„ç…§ç‰‡ã€‚", options: ["æ‹æ‘„", "æ‹ç…§", "æ‹æ‰“"], correctAnswer: "æ‹æ‘„", 
              explanation: "â€œæ‹æ‘„â€(pÄi shÃ¨) æ¯”â€œæ‹ç…§â€æ›´æ­£å¼ï¼Œå¸¸ç”¨äºæè¿°æ‘„å½±æ´»åŠ¨ã€‚â€œæ‹æ‰“â€æ˜¯ç”¨æ‰‹æˆ–å·¥å…·æ‰“ã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘ä»¬<span class="pinyin">wÇ’ men</span></span><span class="word-anno">æ‹æ‘„<span class="pinyin">pÄi shÃ¨</span></span><span class="word-anno">äº†<span class="pinyin">le</span></span><span class="word-anno">å¾ˆå¤š<span class="pinyin">hÄ›n duÅ</span></span><span class="word-anno">ç¾ä¸½<span class="pinyin">mÄ›i lÃ¬</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">ç…§ç‰‡<span class="pinyin">zhÃ o piÃ n</span></span>`, 
              englishExplanation: "English: 'æ‹æ‘„' (pÄi shÃ¨) means 'to film' or 'to shoot (a photo)'. It's a more formal and fitting verb for taking many photos during a trip than the simple 'æ‹ç…§' (pÄi zhÃ o - take a picture)." },
            { id: 'c2q18', question: "ä»–ï¼ˆ ï¼‰åœ°æ‚ä½è€³æœµï¼Œä¸æƒ³å¬ä»»ä½•å™ªéŸ³ã€‚", options: ["è¿…é€Ÿ", "ç¼“æ…¢", "æ¸æ¸"], correctAnswer: "è¿…é€Ÿ", 
              explanation: "â€œè¿…é€Ÿâ€(xÃ¹n sÃ¹) æ„æ€æ˜¯é€Ÿåº¦å¾ˆå¿«ã€‚è¿™ä¸ªè¯æœ€ç¬¦åˆæ‚ä½è€³æœµçš„åŠ¨ä½œã€‚", 
              annotatedSentence: `<span class="word-anno">ä»–<span class="pinyin">tÄ</span></span><span class="word-anno">è¿…é€Ÿ<span class="pinyin">xÃ¹n sÃ¹</span></span><span class="word-anno">åœ°<span class="pinyin">de</span></span><span class="word-anno">æ‚ä½<span class="pinyin">wÇ” zhÃ¹</span></span><span class="word-anno">è€³æœµ<span class="pinyin">Ä›r duo</span></span>`, 
              englishExplanation: "English: 'è¿…é€Ÿ' (xÃ¹n sÃ¹) means 'rapidly' or 'quickly'. This adverb best describes the reflex action of covering one's ears to block out noise." },
            { id: 'c2q19', question: "ä»–ä¸ºäººï¼ˆ ï¼‰ï¼Œä»ä¸å’Œé‚»å±…å‘ç”Ÿäº‰åµã€‚", options: ["å’Œç¥¥", "æ…ˆç¥¥", "ç¥¥å’Œ"], correctAnswer: "ç¥¥å’Œ", 
              explanation: "â€œç¥¥å’Œâ€(xiÃ¡ng hÃ©) å½¢å®¹æ°”æ°›æˆ–äººçš„æ€åº¦æ¸©å’Œã€å®‰å®ã€‚â€œæ…ˆç¥¥â€å¤šç”¨æ¥å½¢å®¹é•¿è¾ˆã€‚", 
              annotatedSentence: `<span class="word-anno">ä»–<span class="pinyin">tÄ</span></span><span class="word-anno">ä¸ºäºº<span class="pinyin">wÃ©i rÃ©n</span></span><span class="word-anno">ç¥¥å’Œ<span class="pinyin">xiÃ¡ng hÃ©</span></span>`, 
              englishExplanation: "English: 'ç¥¥å’Œ' (xiÃ¡ng hÃ©) describes a person's temperament as 'peaceful and serene'. This fits the clue that he never quarrels with neighbors. 'æ…ˆç¥¥' (cÃ­ xiÃ¡ng - kindly) is usually for elders." },
            { id: 'c2q20', question: "é¢å¯¹å›°éš¾ï¼Œæˆ‘ä»¬ä¸èƒ½ï¼ˆ ï¼‰å¸Œæœ›ã€‚", options: ["æ”¾å¼ƒ", "æ”¾æ‰‹", "æ”¾ä¸‹"], correctAnswer: "æ”¾å¼ƒ", 
              explanation: "â€œæ”¾å¼ƒâ€(fÃ ng qÃ¬) å¸Œæœ›ã€æœºä¼šæˆ–æƒåˆ©æ˜¯å›ºå®šæ­é…ï¼Œæ„æ€æ˜¯æ‰”æ‰ä¸è¦äº†ã€‚", 
              annotatedSentence: `<span class="word-anno">æˆ‘ä»¬<span class="pinyin">wÇ’ men</span></span><span class="word-anno">ä¸èƒ½<span class="pinyin">bÃ¹ nÃ©ng</span></span><span class="word-anno">æ”¾å¼ƒ<span class="pinyin">fÃ ng qÃ¬</span></span><span class="word-anno">å¸Œæœ›<span class="pinyin">xÄ« wÃ ng</span></span>`, 
              englishExplanation: "English: 'æ”¾å¼ƒ' (fÃ ng qÃ¬) means 'to give up'. The phrase 'æ”¾å¼ƒå¸Œæœ›' (fÃ ng qÃ¬ xÄ« wÃ ng - to give up hope) is a fixed expression." }
        ],
        "ç¬¬ä¸‰ç»„ï¼šè¾¨å­—ä¸ç†è§£ (Hard)": [
            { id: 'c3q1', question: "å¼Ÿå¼Ÿä¸å°å¿ƒæŠŠé‚»å±…å®¶çš„çª—æˆ·ï¼ˆ ï¼‰ç ´äº†ã€‚", options: ["æ‚", "ç ¸", "åŒ"], correctAnswer: "ç ¸", 
              explanation: "â€œç ¸â€(zÃ¡) æ˜¯ç”¨é‡ç‰©æ’å‡»ã€‚â€œæ‚â€(zÃ¡) æ˜¯å¤šè€Œä¹±çš„æ„æ€ã€‚", 
              annotatedSentence: `<span class="word-anno">æŠŠ<span class="pinyin">bÇ</span></span><span class="word-anno">çª—æˆ·<span class="pinyin">chuÄng hu</span></span><span class="word-anno">ç ¸<span class="pinyin">zÃ¡</span></span><span class="word-anno">ç ´äº†<span class="pinyin">pÃ² le</span></span>`, 
              englishExplanation: "English: The radical 'çŸ³' (shÃ­ - stone) in 'ç ¸' (zÃ¡) suggests an action involving something hard. It means 'to smash'. The other characters don't fit." },
            { id: 'c3q2', question: "çœ‹åˆ°å¼Ÿå¼Ÿé¡½çš®çš„ï¼ˆ ï¼‰å­ï¼Œå¦ˆå¦ˆåˆå¥½æ°”åˆå¥½ç¬‘ã€‚", options: ["æ¨¡", "æ‘¸", "è†œ"], correctAnswer: "æ¨¡", 
              explanation: "â€œæ ·å­â€(yÃ ng zi) æ˜¯å¤–è²Œæˆ–ç¥æƒ…ï¼Œä¹Ÿå†™ä½œâ€œæ¨¡æ ·â€(mÃº yÃ ng)ã€‚â€œæ‘¸â€(mÅ) æ˜¯ç”¨æ‰‹æ¥è§¦ã€‚", 
              annotatedSentence: `<span class="word-anno">é¡½çš®çš„<span class="pinyin">wÃ¡n pÃ­ de</span></span><span class="word-anno">æ¨¡<span class="pinyin">mÃº</span></span><span class="word-anno">æ ·<span class="pinyin">yÃ ng</span></span>`, 
              englishExplanation: "English: The word for 'appearance' or 'look' is 'æ¨¡æ ·' (mÃº yÃ ng). 'æ‘¸' (mÅ) means 'to touch', which doesn't make sense here." },
            { id: 'c3q3', question: "æˆ‘ä»¬è¦åˆ†ï¼ˆ ï¼‰æ˜¯éï¼Œåšä¸€ä¸ªæ­£ç›´çš„äººã€‚", options: ["è¾¨", "è¾©", "è¾«"], correctAnswer: "è¾¨", 
              explanation: "â€œåˆ†è¾¨â€(fÄ“n biÃ n) æ˜¯æŒ‡åŒºåˆ†è¾¨åˆ«ã€‚â€œè¾©â€æ˜¯è¾©è®º(debate)ï¼Œ â€œè¾«â€æ˜¯è¾«å­(braid)ã€‚", 
              annotatedSentence: `<span class="word-anno">åˆ†è¾¨<span class="pinyin">fÄ“n biÃ n</span></span><span class="word-anno">æ˜¯é<span class="pinyin">shÃ¬ fÄ“i</span></span>`, 
              englishExplanation: "English: 'åˆ†è¾¨' (fÄ“n biÃ n) means 'to distinguish' or 'to differentiate'. The character 'è¾¨' is used for telling things apart, like right from wrong ('æ˜¯é')." },
            { id: 'c3q4', question: "è™½ç„¶ä»–å®¶å¢ƒä¸å¯Œè£•ï¼Œä½†ä»–ä»ä¸ï¼ˆ ï¼‰æ…•åˆ«äººçš„ç”Ÿæ´»ã€‚", options: ["ç¾¡", "å«Œ", "æ­‰"], correctAnswer: "ç¾¡", 
              explanation: "â€œç¾¡æ…•â€(xiÃ n mÃ¹) æ˜¯çœ‹åˆ°åˆ«äººæœ‰å¥½çš„ä¸œè¥¿æˆ–æ¡ä»¶è€Œå¸Œæœ›è‡ªå·±ä¹Ÿæœ‰ã€‚â€œå«Œâ€æ˜¯å«Œå¼ƒ(dislike)ã€‚", 
              annotatedSentence: `<span class="word-anno">ä»ä¸<span class="pinyin">cÃ³ng bÃ¹</span></span><span class="word-anno">ç¾¡<span class="pinyin">xiÃ n</span></span><span class="word-anno">æ…•<span class="pinyin">mÃ¹</span></span><span class="word-anno">åˆ«äºº<span class="pinyin">biÃ© rÃ©n</span></span>`, 
              englishExplanation: "English: The word for 'to envy' or 'to admire' is 'ç¾¡æ…•' (xiÃ n mÃ¹). 'å«Œ' (xiÃ¡n) means 'to dislike', which is the opposite of the intended meaning." },
            { id: 'c3q5', question: "ä»–ï¼ˆ ï¼‰ç€ä¸€è‚¡ä¸æœè¾“çš„åŠ²å„¿ï¼Œåˆ»è‹¦ç»ƒä¹ ï¼Œç»ˆäºå–å¾—äº†è¿›æ­¥ã€‚", options: ["å‡­", "ä»»", "åª"], correctAnswer: "å‡­", 
              explanation: "â€œå‡­ç€â€(pÃ­ng zhe) æ„æ€æ˜¯ä¾é ã€æ ¹æ®ã€‚â€œä»»â€æ˜¯ä»»ç”±(let)ã€‚", 
              annotatedSentence: `<span class="word-anno">ä»–<span class="pinyin">tÄ</span></span><span class="word-anno">å‡­<span class="pinyin">pÃ­ng</span></span><span class="word-anno">ç€<span class="pinyin">zhe</span></span><span class="word-anno">ä¸€è‚¡<span class="pinyin">yÄ« gÇ”</span></span><span class="word-anno">ä¸æœè¾“<span class="pinyin">bÃ¹ fÃº shÅ«</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">åŠ²å„¿<span class="pinyin">jÃ¬nr</span></span>`, 
              englishExplanation: "English: 'å‡­ç€' (pÃ­ng zhe) means 'relying on' or 'by virtue of'. He achieved progress by relying on his never-give-up spirit." },
            { id: 'c3q6', question: "è¿™æ¬¡è€ƒè¯•çš„èŒƒå›´å¾ˆï¼ˆ ï¼‰ï¼Œæˆ‘ä»¬è¦å¥½å¥½å¤ä¹ ã€‚", options: ["å¹¿", "å‚", "çŠ·"], correctAnswer: "å¹¿", 
              explanation: "â€œå¹¿â€(guÇng) æŒ‡èŒƒå›´å¤§ã€å¤šã€‚â€œå‚â€æ˜¯å·¥å‚(factory)ã€‚", 
              annotatedSentence: `<span class="word-anno">è€ƒè¯•<span class="pinyin">kÇo shÃ¬</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">èŒƒå›´<span class="pinyin">fÃ n wÃ©i</span></span><span class="word-anno">å¾ˆ<span class="pinyin">hÄ›n</span></span><span class="word-anno">å¹¿<span class="pinyin">guÇng</span></span>`, 
              englishExplanation: "English: 'å¹¿' (guÇng) means 'wide' or 'broad', and is used to describe the scope ('èŒƒå›´') of the exam. 'å‚' (chÇng) is factory." },
            { id: 'c3q7', question: "åŒ»ç”Ÿæé†’æˆ‘ä»¬è¦ï¼ˆ ï¼‰æ„é¥®é£Ÿå«ç”Ÿï¼Œé¢„é˜²ç–¾ç—…ã€‚", options: ["æ³¨", "ä½", "æŸ±"], correctAnswer: "æ³¨", 
              explanation: "â€œæ³¨æ„â€(zhÃ¹ yÃ¬) æ˜¯æé†’è¦å°å¿ƒã€ç•™å¿ƒã€‚â€œä½â€æ˜¯å±…ä½(live)ã€‚", 
              annotatedSentence: `<span class="word-anno">è¦<span class="pinyin">yÃ o</span></span><span class="word-anno">æ³¨<span class="pinyin">zhÃ¹</span></span><span class="word-anno">æ„<span class="pinyin">yÃ¬</span></span><span class="word-anno">é¥®é£Ÿ<span class="pinyin">yÇn shÃ­</span></span><span class="word-anno">å«ç”Ÿ<span class="pinyin">wÃ¨i shÄ“ng</span></span>`, 
              englishExplanation: "English: The word for 'to pay attention to' is 'æ³¨æ„' (zhÃ¹ yÃ¬). It has a 'water' radical (æ°µ). 'ä½' (zhÃ¹) means 'to live'." },
            { id: 'c3q8', question: "å¦ˆå¦ˆæŠŠç¢—ç¢Ÿæ•´é½åœ°æ”¾è¿›ï¼ˆ ï¼‰æŸœé‡Œã€‚", options: ["å¨", "æ©±", " chÃº"], correctAnswer: "æ©±", 
              explanation: "â€œæ©±æŸœâ€(chÃº guÃ¬) æ˜¯å­˜æ”¾é¤å…·çš„æŸœå­ï¼Œéƒ¨é¦–æ˜¯â€œæœ¨â€ã€‚è€Œâ€œå¨æˆ¿â€(chÃº fÃ¡ng)çš„â€œå¨â€éƒ¨é¦–æ˜¯â€œå‚â€ã€‚", 
              annotatedSentence: `<span class="word-anno">æ”¾è¿›<span class="pinyin">fÃ ng jÃ¬n</span></span><span class="word-anno">æ©±<span class="pinyin">chÃº</span></span><span class="word-anno">æŸœ<span class="pinyin">guÃ¬</span></span><span class="word-anno">é‡Œ<span class="pinyin">lÇ</span></span>`, 
              englishExplanation: "English: A cabinet, 'æ©±æŸœ' (chÃº guÃ¬), is a piece of furniture, so 'æ©±' has the 'wood' radical (æœ¨). The character for kitchen, 'å¨æˆ¿' (chÃº fÃ¡ng), uses 'å¨'." },
            { id: 'c3q9', question: "ä»–å› ä¸ºåœ¨è€ƒè¯•ä¸­ä½œï¼ˆ ï¼‰ï¼Œè¢«å–æ¶ˆäº†æˆç»©ã€‚", options: ["å¼Š", "å¸", "æ•"], correctAnswer: "å¼Š", 
              explanation: "â€œä½œå¼Šâ€(zuÃ² bÃ¬) æ˜¯æŒ‡ç”¨ä¸æ­£å½“çš„æ‰‹æ®µåœ¨è€ƒè¯•æˆ–æ¯”èµ›ä¸­å–å¾—å¥½æˆç»©ã€‚", 
              annotatedSentence: `<span class="word-anno">è€ƒè¯•ä¸­<span class="pinyin">kÇo shÃ¬ zhÅng</span></span><span class="word-anno">ä½œå¼Š<span class="pinyin">zuÃ² bÃ¬</span></span>`, 
              englishExplanation: "English: 'ä½œå¼Š' (zuÃ² bÃ¬) is the specific term for 'to cheat' in an exam. 'å¸' (bÃ¬) means currency, and 'æ•' (bÃ¬) is a humble term for 'my'." },
            { id: 'c3q10', question: "æˆ‘ä»¬è¦çæƒœæ—¶é—´ï¼Œä¸è¦ï¼ˆ ï¼‰è´¹å…‰é˜´ã€‚", options: ["æµª", "è‰¯", "ç‹¼"], correctAnswer: "æµª", 
              explanation: "â€œæµªè´¹â€(lÃ ng fÃ¨i) æ˜¯æŒ‡æ²¡æœ‰å¥½å¥½åˆ©ç”¨ï¼Œä½¿ä¸œè¥¿ã€æ—¶é—´ç­‰ç™½ç™½æ¶ˆè€—æ‰ã€‚", 
              annotatedSentence: `<span class="word-anno">ä¸è¦<span class="pinyin">bÃº yÃ o</span></span><span class="word-anno">æµª<span class="pinyin">lÃ ng</span></span><span class="word-anno">è´¹<span class="pinyin">fÃ¨i</span></span><span class="word-anno">å…‰é˜´<span class="pinyin">guÄng yÄ«n</span></span>`, 
              englishExplanation: "English: The word for 'to waste' is 'æµªè´¹' (lÃ ng fÃ¨i). 'å…‰é˜´' (guÄng yÄ«n) is a literary term for 'time'." },
            { id: 'c3q11', question: "è¿™ä»¶è¡£æœçš„ï¼ˆ ï¼‰æ–™å¾ˆèˆ’æœï¼Œç©¿åœ¨èº«ä¸Šå¾ˆå‡‰å¿«ã€‚", options: ["æ", "æ‰", "è´¢"], correctAnswer: "æ", 
              explanation: "â€œææ–™â€(cÃ¡i liÃ o) æ˜¯æŒ‡åˆ¶ä½œç‰©å“çš„åŸæ–™ã€‚", 
              annotatedSentence: `<span class="word-anno">è¡£æœçš„<span class="pinyin">yÄ« fu de</span></span><span class="word-anno">æ<span class="pinyin">cÃ¡i</span></span><span class="word-anno">æ–™<span class="pinyin">liÃ o</span></span><span class="word-anno">å¾ˆ<span class="pinyin">hÄ›n</span></span><span class="word-anno">èˆ’æœ<span class="pinyin">shÅ« fu</span></span>`, 
              englishExplanation: "English: 'ææ–™' (cÃ¡i liÃ o) means 'material' or 'fabric'. The 'wood' radical (æœ¨) in 'æ' often relates to raw materials. 'æ‰' (cÃ¡i) means talent, and 'è´¢' (cÃ¡i) means wealth." },
            { id: 'c3q12', question: "è¿™æ¬¡åæ–‡æµ‹ï¼ˆ ï¼‰çš„æˆç»©ï¼Œæˆ‘è¿›æ­¥äº†å¾ˆå¤šã€‚", options: ["æ¡", "éªŒ", "é™©"], correctAnswer: "éªŒ", 
              explanation: "â€œæµ‹éªŒâ€(cÃ¨ yÃ n) æ˜¯æŒ‡è€ƒè¯•ã€æ£€æŸ¥å­¦ä¹ æˆæœã€‚", 
              annotatedSentence: `<span class="word-anno">åæ–‡<span class="pinyin">huÃ¡ wÃ©n</span></span><span class="word-anno">æµ‹éªŒ<span class="pinyin">cÃ¨ yÃ n</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">æˆç»©<span class="pinyin">chÃ©ng jÃ¬</span></span>`, 
              englishExplanation: "English: 'æµ‹éªŒ' (cÃ¨ yÃ n) is the word for 'test' or 'quiz'. 'éªŒ' (yÃ n) means to test or inspect. 'æ¡' (jiÇn) is to pick up, and 'é™©' (xiÇn) is danger." },
            { id: 'c3q13', question: "å¤±è´¥å¹¶ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯å¤±å»ï¼ˆ ï¼‰æ–—çš„å‹‡æ°”ã€‚", options: ["å¥‹", "æ„¤", "ä»½"], correctAnswer: "å¥‹", 
              explanation: "â€œå¥‹æ–—â€(fÃ¨n dÃ²u) æ˜¯æŒ‡ä¸ºäº†è¾¾åˆ°ç›®çš„è€ŒåŠªåŠ›ã€‚â€œæ„¤â€æ˜¯æ„¤æ€’(angry)ã€‚", 
              annotatedSentence: `<span class="word-anno">å¤±å»<span class="pinyin">shÄ« qÃ¹</span></span><span class="word-anno">å¥‹æ–—<span class="pinyin">fÃ¨n dÃ²u</span></span><span class="word-anno">çš„<span class="pinyin">de</span></span><span class="word-anno">å‹‡æ°”<span class="pinyin">yÇ’ng qÃ¬</span></span>`, 
              englishExplanation: "English: 'å¥‹æ–—' (fÃ¨n dÃ²u) means 'to struggle' or 'to strive'. 'å¥‹' (fÃ¨n) itself carries the meaning of effort and exertion." },
            { id: 'c3q14', question: "æˆ‘ä»¬è¦å­¦ä¼šï¼ˆ ï¼‰å¿ƒç­‰å¾…ï¼Œä¸è¦æ€¥èºã€‚", options: ["è€", "å¥ˆ", "nÃ i"], correctAnswer: "è€", 
              explanation: "â€œè€å¿ƒâ€(nÃ i xÄ«n) æ˜¯æŒ‡ä¸æ€¥èºã€ä¸åŒçƒ¦çš„æ€§æ ¼ã€‚", 
              annotatedSentence: `<span class="word-anno">å­¦ä¼š<span class="pinyin">xuÃ© huÃ¬</span></span><span class="word-anno">è€<span class="pinyin">nÃ i</span></span><span class="word-anno">å¿ƒ<span class="pinyin">xÄ«n</span></span><span class="word-anno">ç­‰å¾…<span class="pinyin">dÄ›ng dÃ i</span></span>`, 
              englishExplanation: "English: 'è€å¿ƒ' (nÃ i xÄ«n) is the word for 'patience'. 'è€' (nÃ i) means to endure or to be patient." },
            { id: 'c3q15', question: "ä»–ï¼ˆ ï¼‰å†³ä¸å‘å›°éš¾ä½å¤´ã€‚", options: ["åš", "ç›‘", "è‰°"], correctAnswer: "åš", 
              explanation: "â€œåšå†³â€(jiÄn juÃ©) è¡¨ç¤ºæ€åº¦ã€ä¸»å¼ ç­‰éå¸¸åšå®šï¼Œä¸åŠ¨æ‘‡ã€‚", 
              annotatedSentence: `<span class="word-anno">ä»–<span class="pinyin">tÄ</span></span><span class="word-anno">åš<span class="pinyin">jiÄn</span></span><span class="word-anno">å†³<span class="pinyin">juÃ©</span></span><span class="word-anno">ä¸å‘<span class="pinyin">bÃº xiÃ ng</span></span><span class="word-anno">å›°éš¾<span class="pinyin">kÃ¹n nan</span></span><span class="word-anno">ä½å¤´<span class="pinyin">dÄ« tÃ³u</span></span>`, 
              englishExplanation: "English: 'åšå†³' (jiÄn juÃ©) means 'resolute' or 'determined'. 'åš' (jiÄn) means firm or solid." },
            { id: 'c3q16', question: "è¿™é“é¢˜çš„è§£é¢˜æ­¥ï¼ˆ ï¼‰å¾ˆå¤æ‚ã€‚", options: ["éª¤", "èš", "å–"], correctAnswer: "éª¤", 
              explanation: "â€œæ­¥éª¤â€(bÃ¹ zhÃ²u) æ˜¯æŒ‡åšäº‹æƒ…çš„å…ˆåæ¬¡åºã€‚", 
              annotatedSentence: `<span class="word-anno">è§£é¢˜<span class="pinyin">jiÄ› tÃ­</span></span><span class="word-anno">æ­¥éª¤<span class="pinyin">bÃ¹ zhÃ²u</span></span><span class="word-anno">å¾ˆ<span class="pinyin">hÄ›n</span></span><span class="word-anno">å¤æ‚<span class="pinyin">fÃ¹ zÃ¡</span></span>`, 
              englishExplanation: "English: The word for 'steps' or 'procedure' is 'æ­¥éª¤' (bÃ¹ zhÃ²u). 'èš' (jÃ¹) means to gather, and 'å–' (qÇ”) means to take." },
            { id: 'c3q17', question: "æˆ‘å†›åŠ¿å¦‚ç ´ç«¹ï¼Œä¸€ï¼ˆ ï¼‰åƒé‡Œï¼Œå¾ˆå¿«å°±å–å¾—äº†èƒœåˆ©ã€‚", options: ["æ³„", "æ³»", "å¸"], correctAnswer: "æ³»", 
              explanation: "â€œä¸€æ³»åƒé‡Œâ€(yÄ« xiÃ¨ qiÄn lÇ) æ˜¯ä¸€ä¸ªæˆè¯­ï¼Œå½¢å®¹æ±Ÿæ²³æ°´æµè¿…é€Ÿï¼Œä¹Ÿæ¯”å–»æ–‡ç¬”æˆ–ä¹æ›²æ°”åŠ¿ç•…å¿«ã€‚è¿™é‡Œç”¨â€œæ³»â€ã€‚", 
              annotatedSentence: `<span class="word-anno">ä¸€æ³»åƒé‡Œ<span class="pinyin">yÄ« xiÃ¨ qiÄn lÇ</span></span>`, 
              englishExplanation: "English: The idiom is 'ä¸€æ³»åƒé‡Œ' (yÄ« xiÃ¨ qiÄn lÇ), meaning 'to rush down a thousand miles'. It describes an unstoppable force. 'æ³»' (xiÃ¨), with the water radical (æ°µ), is used for flowing water." },
            { id: 'c3q18', question: "ä»–ä¸å°å¿ƒæŠŠå¢¨æ°´å¼„ç¿»ï¼Œï¼ˆ ï¼‰è„äº†æ–°ä¹°çš„ç™½è¡¬è¡«ã€‚", options: ["æ±¡", "äº", "äº"], correctAnswer: "æ±¡", 
              explanation: "â€œæ±¡è„â€(wÅ« zÄng) æ„æ€æ˜¯å¼„è„äº†ã€‚â€œäºâ€æ˜¯åƒäºï¼Œâ€œäºâ€æ˜¯ä»‹è¯ã€‚", 
              annotatedSentence: `<span class="word-anno">æ±¡<span class="pinyin">wÅ«</span></span><span class="word-anno">è„äº†<span class="pinyin">zÄng le</span></span><span class="word-anno">æ–°ä¹°çš„<span class="pinyin">xÄ«n mÇi de</span></span><span class="word-anno">ç™½è¡¬è¡«<span class="pinyin">bÃ¡i chÃ¨n shÄn</span></span>`, 
              englishExplanation: "English: 'æ±¡' (wÅ«) means 'to pollute' or 'to stain'. It is the correct character to describe making the shirt dirty ('è„')." },
            { id: 'c3q19', question: "ä»–è¿™ä¸ªäººå¾ˆï¼ˆ ï¼‰çŒ¾ï¼Œä½ è·Ÿä»–æ‰“äº¤é“è¦å°å¿ƒã€‚", options: ["ç‹¡", "è¾ƒ", "æ ¡"], correctAnswer: "ç‹¡", 
              explanation: "â€œç‹¡çŒ¾â€(jiÇo huÃ¡) å½¢å®¹äººè¯¡è®¡å¤šç«¯ï¼Œä¸å¯ä¿¡ä»»ã€‚â€œè¾ƒâ€æ˜¯æ¯”è¾ƒï¼Œâ€œæ ¡â€æ˜¯å­¦æ ¡ã€‚", 
              annotatedSentence: `<span class="word-anno">è¿™ä¸ªäºº<span class="pinyin">zhÃ¨ ge rÃ©n</span></span><span class="word-anno">å¾ˆ<span class="pinyin">hÄ›n</span></span><span class="word-anno">ç‹¡<span class="pinyin">jiÇo</span></span><span class="word-anno">çŒ¾<span class="pinyin">huÃ¡</span></span>`, 
              englishExplanation: "English: 'ç‹¡çŒ¾' (jiÇo huÃ¡) is the word for 'cunning' or 'sly'. The 'dog' radical (çŠ­) in 'ç‹¡' often appears in characters related to animalistic or cunning traits." },
            { id: 'c3q20', question: "ä»–è®¾è®¡çš„å»ºç­‘ï¼ˆ ï¼‰å¼æ–°é¢–ï¼Œèµ¢å¾—äº†è®¾è®¡å¤§å¥–ã€‚", options: ["æ ¼å¼", "æ–¹å¼", "å¼æ ·"], correctAnswer: "å¼æ ·", 
              explanation: "â€œå¼æ ·â€(shÃ¬ yÃ ng) æŒ‡çš„æ˜¯ç‰©å“çš„å½¢çŠ¶ã€å¤–è¡¨ã€‚â€œæ ¼å¼â€å¤šæŒ‡æ–‡ä»¶çš„å¸ƒå±€ï¼Œâ€œæ–¹å¼â€æŒ‡æ–¹æ³•ã€‚", 
              annotatedSentence: `<span class="word-anno">å»ºç­‘<span class="pinyin">jiÃ n zhÃ¹</span></span><span class="word-anno">å¼æ ·<span class="pinyin">shÃ¬ yÃ ng</span></span><span class="word-anno">æ–°é¢–<span class="pinyin">xÄ«n yÇng</span></span>`, 
              englishExplanation: "English: 'å¼æ ·' (shÃ¬ yÃ ng) means 'style' or 'design' (of an object). It's the best fit for describing the novel design of a building. 'æ ¼å¼' (gÃ© shÃ¬) is 'format' and 'æ–¹å¼' (fÄng shÃ¬) is 'method'." }
        ]
    };

    // --- State Variables ---
    let currentSetData = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let incorrectAnswers = [];
    let startTime;
    let endTime;
    let isRedoing = false;
    let proceedTimeoutId = null;
    let isWaitingToProceed = false;
    let userName = localStorage.getItem(USER_NAME_STORAGE_KEY) || '';

    // --- Sound Synthesis (Tone.js) ---
    const correctSound = new Tone.Synth({ oscillator: { type: 'triangle' }, envelope: { attack: 0.005, decay: 0.1, sustain: 0.05, release: 0.2 }, }).toDestination();
    const incorrectSound = new Tone.Synth({ oscillator: { type: 'square' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0, release: 0.2 } }).toDestination();

    // --- Confetti ---
    const confettiCanvas = document.getElementById('confettiCanvas');
    const myConfetti = confetti.create(confettiCanvas, { resize: true, useWorker: true });

    // --- DOM Elements ---
    const nameModal = document.getElementById('nameModal');
    const userNameInput = document.getElementById('userNameInput');
    const setSelectionScreen = document.getElementById('setSelectionScreen');
    const setButtonsContainer = document.getElementById('setButtonsContainer');
    const flashcardScreen = document.getElementById('flashcardScreen');
    const resultsScreen = document.getElementById('resultsScreen');
    const progressText = document.getElementById('progressText');
    const progressBarFill = document.getElementById('progressBarFill');
    const flashcard = document.getElementById('flashcard');
    const questionText = document.getElementById('questionText');
    const feedbackText = document.getElementById('feedbackText');
    const feedbackIconContainer = document.getElementById('feedbackIconContainer');
    const continueText = document.getElementById('continueText');
    const choiceButtons = [ document.getElementById('choice1'), document.getElementById('choice2'), document.getElementById('choice3') ];
    const scoreDisplayEl = document.getElementById('scoreDisplay');
    const percentageEl = document.getElementById('percentage');
    const timeTakenEl = document.getElementById('timeTaken');
    const incorrectListContainer = document.getElementById('incorrectListContainer');
    const incorrectList = document.getElementById('incorrectList');
    const noIncorrectText = document.getElementById('noIncorrectText');
    const redoIncorrectButton = document.getElementById('redoIncorrectButton');
    const encouragementTextEl = document.getElementById('encouragementText');
    const resultsHeadingEl = document.getElementById('resultsHeading');
    const raceTrackContainer = document.querySelector('#resultsScreen .race-track-container');
    const raceTrackFillEl = document.getElementById('raceTrackFill');
    const rocketEl = document.getElementById('rocketEl');

    // --- Event Listeners ---
    flashcard.addEventListener('click', () => {
        if (isWaitingToProceed &&
            !flashcard.classList.contains('incorrect-state') &&
            (flashcard.classList.contains('correct-state-static') || flashcard.classList.contains('clickable-card'))) {
            proceedToNext();
        }
    });
    userNameInput.addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
            event.preventDefault();
            saveUserName();
        }
    });

    // --- Utility Functions ---
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // --- Core Application Logic ---
    function populateStartButton() {
        setButtonsContainer.innerHTML = '';
        Object.keys(allFlashcardSets).forEach(setName => {
            const set = allFlashcardSets[setName];
            if (set.length >= QUESTIONS_PER_SET) {
                const button = document.createElement('button');
                button.textContent = `å¼€å§‹ ${setName}`;
                button.className = `action-button w-full py-4 px-6 bg-red-500 hover:bg-red-600 text-white mb-3 last:mb-0 text-lg`; 
                button.onclick = () => startFlashcardSession(set, setName);
                setButtonsContainer.appendChild(button);
            } else {
                const errorP = document.createElement('p');
                errorP.className = "text-red-500 text-sm";
                errorP.textContent = `Error: The set "${setName}" does not have enough questions (${set.length} found, ${QUESTIONS_PER_SET} required).`;
                setButtonsContainer.appendChild(errorP);
            }
        });
    }

    function saveUserName() {
        const name = userNameInput.value.trim();
        userName = name ? name : 'å­¦ä¹ è€…';
        localStorage.setItem(USER_NAME_STORAGE_KEY, userName);
        nameModal.style.display = 'none';
        showSetSelection();
    }

    function startFlashcardSession(selectedSet, setName) {
        Tone.start().catch(e => console.warn("Audio context could not start:", e));
        let fullSetCopy = [...selectedSet]; 
        shuffleArray(fullSetCopy);
        currentSetData = fullSetCopy.slice(0, QUESTIONS_PER_SET); 
        currentSetData.setName = setName; 
        currentQuestionIndex = 0;
        score = 0;
        incorrectAnswers = [];
        isRedoing = false;
        setSelectionScreen.classList.add('hidden');
        resultsScreen.classList.add('hidden');
        flashcardScreen.classList.remove('hidden');
        updateProgress(); 
        startTime = new Date();
        displayQuestion();
    }

    function resetCardState() {
        if (proceedTimeoutId) { clearTimeout(proceedTimeoutId); proceedTimeoutId = null; }
        isWaitingToProceed = false;
        flashcard.classList.remove('shake', 'correct-state-static', 'incorrect-state', 'clickable-card');
        questionText.classList.remove('hidden');
        feedbackText.innerHTML = '';
        feedbackIconContainer.classList.add('hidden');
        continueText.classList.add('hidden');
        choiceButtons.forEach(btn => {
            btn.className = 'choice-button bg-slate-100 hover:bg-slate-200 text-slate-700';
        });
    }

    function displayQuestion() {
        resetCardState();
        if (currentQuestionIndex >= currentSetData.length) {
            showResults();
            return;
        }
        const questionData = currentSetData[currentQuestionIndex];
        questionText.innerHTML = questionData.question.replace(/\n/g, '<br>');
        let displayOptions = [...questionData.options];
        shuffleArray(displayOptions);
        choiceButtons.forEach((button, index) => {
            if (displayOptions[index] !== undefined) {
                button.textContent = displayOptions[index];
                button.disabled = false;
                button.dataset.answer = displayOptions[index];
                button.onclick = () => checkAnswer(button);
                button.style.display = 'flex';
            } else {
                button.style.display = 'none'; 
            }
        });
    }

    function updateProgress() {
        const totalQuestions = currentSetData.length;
        const completed = currentQuestionIndex;
        const progressPercentage = totalQuestions > 0 ? (completed / totalQuestions) * 100 : 0;
        progressText.textContent = `${completed} / ${totalQuestions}`;
        progressBarFill.style.width = `${progressPercentage}%`;
    }

    function checkAnswer(button) {
        Tone.start().catch(e => console.warn("Audio context failed:", e));
        if (isWaitingToProceed && !flashcard.classList.contains('incorrect-state')) return;
        const selectedAnswer = button.dataset.answer;
        const questionData = currentSetData[currentQuestionIndex];
        const correctAnswer = questionData.correctAnswer;
        choiceButtons.forEach(btn => btn.disabled = true);

        if (selectedAnswer === correctAnswer) {
            if (!isRedoing) score++;
            flashcard.classList.add('correct-state-static');
            feedbackIconContainer.innerHTML = '<span class="text-7xl md:text-8xl">âœ“</span>';
            feedbackIconContainer.classList.remove('hidden');
            questionText.classList.add('hidden');
            feedbackText.textContent = 'æ­£ç¡®!';
            myConfetti({ particleCount: 120, spread: 80, origin: { y: 0.6 } });
            correctSound.triggerAttackRelease("G5", "8n", Tone.now());
            button.className = 'choice-button bg-emerald-600 text-white ring-2 ring-emerald-800 shadow-md';
            isWaitingToProceed = true;
            flashcard.classList.add('clickable-card');
            continueText.classList.remove('hidden');
            proceedTimeoutId = setTimeout(proceedToNext, AUTO_PROCEED_DELAY);
            currentQuestionIndex++; 
            updateProgress(); 
        } else {
            flashcard.classList.add('shake', 'incorrect-state');
            feedbackIconContainer.innerHTML = '<span class="text-7xl md:text-8xl">âœ—</span>';
            feedbackIconContainer.classList.remove('hidden');
            questionText.classList.add('hidden'); 
            
            // NEW: Enhanced feedback generation
            const annotatedSentence = questionData.annotatedSentence.replace('ï¼ˆ ï¼‰', `<span class="word-anno" style="color:#ffb703;">${correctAnswer}<span class="pinyin">Â </span></span>`);
            const englishExplanation = questionData.englishExplanation || "";
            const chineseExplanation = questionData.explanation || "æ²¡æœ‰è§£æã€‚";
            
            feedbackText.innerHTML = `
                <div class="annotated-sentence-container">${annotatedSentence}</div>
                <div class="english-explanation">${englishExplanation}</div>
                <div class="explanation-box"><b>ä¸­æ–‡è§£æ:</b> ${chineseExplanation}</div>
                <div class="prompt-guidance">ç‚¹å‡»ç»¿è‰²æ­£ç¡®ç­”æ¡ˆç»§ç»­ã€‚</div>
            `;

            incorrectSound.triggerAttackRelease("C3", "8n");
            if (!isRedoing) {
                incorrectAnswers.push({ questionData: questionData, userAnswer: selectedAnswer });
            }
            isWaitingToProceed = false;
            flashcard.classList.remove('clickable-card');
            if (proceedTimeoutId) { clearTimeout(proceedTimeoutId); }
            choiceButtons.forEach(btn => {
                if (btn.dataset.answer === correctAnswer) {
                    btn.className = 'choice-button bg-emerald-500 hover:bg-emerald-600 text-white';
                    btn.disabled = false;
                    btn.onclick = function() {
                        currentQuestionIndex++; 
                        updateProgress(); 
                        proceedToNext();
                    };
                } else if (btn === button) {
                    btn.className = 'choice-button bg-red-700 text-white ring-2 ring-red-900 shadow-md';
                } else {
                    btn.className = 'choice-button bg-slate-200 text-slate-500 forced-disabled-look';
                }
            });
        }
    }

    function proceedToNext() {
        if (proceedTimeoutId) { clearTimeout(proceedTimeoutId); }
        isWaitingToProceed = false;
        displayQuestion();
    }

    function showResults() {
        endTime = new Date();
        const timeDiff = Math.round((endTime - startTime) / 1000);
        const totalQuestions = currentSetData.length;
        const currentScore = isRedoing ? (totalQuestions - incorrectAnswers.length) : score;
        const percentage = totalQuestions > 0 ? Math.round((currentScore / totalQuestions) * 100) : 0;

        resultsHeadingEl.textContent = isRedoing ? 'é”™é¢˜å¤ä¹ å®Œæˆï¼' : `â€œ${currentSetData.setName || 'ç»ƒä¹ '}â€å®Œæˆ!`;
        scoreDisplayEl.textContent = `${currentScore} / ${totalQuestions}`;
        percentageEl.textContent = `${percentage}`;
        timeTakenEl.textContent = `${timeDiff}`;

        if (percentage === 100) encouragementTextEl.textContent = "å¤ªæ£’äº†ï¼Œæ»¡åˆ†ï¼ä½ å·²ç»æŒæ¡äº†è¿™ä¸ªéƒ¨åˆ†ï¼";
        else if (percentage >= 70) encouragementTextEl.textContent = "åšå¾—å¾ˆå¥½ï¼ç»§ç»­åŠªåŠ›ï¼Œä½ éå¸¸å‡ºè‰²ã€‚";
        else encouragementTextEl.textContent = "ä¸é”™ï¼å¤ä¹ ä¸€ä¸‹é”™é¢˜ï¼Œå¯ä»¥è®©ä½ æ›´å¼ºå¤§ã€‚";
        
        flashcardScreen.classList.add('hidden');
        resultsScreen.classList.remove('hidden');
        
        requestAnimationFrame(() => {
            setTimeout(() => { 
                const trackWidth = raceTrackContainer.offsetWidth;
                const effectiveTrackWidth = trackWidth - rocketEl.offsetWidth; 
                const finalRocketPosition = Math.max(0, (percentage / 100) * effectiveTrackWidth);
                rocketEl.style.left = `${finalRocketPosition}px`;
                raceTrackFillEl.style.width = `${finalRocketPosition}px`;
            }, 100);
        });

        incorrectList.innerHTML = '';
        if (incorrectAnswers.length > 0) {
            incorrectListContainer.classList.remove('hidden'); noIncorrectText.classList.add('hidden');
            incorrectAnswers.forEach(item => {
                const li = document.createElement('li');
                li.innerHTML = `<b>é—®é¢˜:</b> ${item.questionData.question.replace(/\n/g, ' ')}<br/><b>ä½ çš„ç­”æ¡ˆ:</b> <span class="text-red-500">${item.userAnswer}</span><br/><b>æ­£ç¡®ç­”æ¡ˆ:</b> <span class="text-emerald-600">${item.questionData.correctAnswer}</span>`;
                incorrectList.appendChild(li);
            });
            redoIncorrectButton.classList.remove('hidden');
            redoIncorrectButton.disabled = isRedoing || incorrectAnswers.length === 0;
        } else {
            incorrectListContainer.classList.add('hidden'); noIncorrectText.classList.remove('hidden');
            redoIncorrectButton.classList.add('hidden');
        }

        sendResultsToGoogleSheet({
            setName: currentSetData.setName || "Unknown Set", score: currentScore, totalQuestions: totalQuestions,
            percentage: percentage, timeTaken: timeDiff,
            incorrectAnswersJSON: JSON.stringify(incorrectAnswers.map(item => ({ q: item.questionData.question, u: item.userAnswer, c: item.questionData.correctAnswer }))),
            name: userName, timestamp: new Date().toISOString() 
        });

        if (isRedoing) { incorrectAnswers = []; isRedoing = false; }
    }

    function sendResultsToGoogleSheet(data) {
        fetch(APPS_SCRIPT_URL, {
            method: 'POST', mode: 'no-cors', 
            headers: { 'Content-Type': 'application/json' }, 
            body: JSON.stringify({payloadType: 'flashcardResults', ...data, subject: 'Chinese' })
        }).catch(err => console.error("Failed to send results:", err));
    }

    function redoIncorrect() {
        if (incorrectAnswers.length === 0) return;
        const originalSetName = currentSetData.setName.replace(" (é‡åš)", "");
        currentSetData = incorrectAnswers.map(item => item.questionData);
        currentSetData.setName = `${originalSetName} (é‡åš)`;
        currentQuestionIndex = 0;
        incorrectAnswers = []; 
        isRedoing = true;
        resultsScreen.classList.add('hidden');
        flashcardScreen.classList.remove('hidden');
        startTime = new Date();
        updateProgress(); 
        displayQuestion();
    }

    function showSetSelection() {
        if (proceedTimeoutId) { clearTimeout(proceedTimeoutId); }
        isWaitingToProceed = false; isRedoing = false; 
        nameModal.style.display = 'none';
        flashcardScreen.classList.add('hidden');
        resultsScreen.classList.add('hidden');
        setSelectionScreen.classList.remove('hidden');
        populateStartButton();
    }

    // --- Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        userName = localStorage.getItem(USER_NAME_STORAGE_KEY) || '';
        if (userName) {
            showSetSelection(); 
        } else {
            nameModal.style.display = 'flex';
            userNameInput.focus();
        }
    });
</script>

</body>
</html>
